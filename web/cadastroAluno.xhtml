<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Cursinho</title>
    </h:head>
    <body>
        <p:dataTable value="#{alunoMB.getTodos()}" emptyMessage="Nenhum aluno cadastrado"
                     paginatorTemplate="{CurrentPageReport}   {FirstPageLink} {PreviousPageLink}
                     {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                     paginator="true" rows="5" rowsPerPageTemplate="5,10,15,20,25"
                     var="aluno">
            <f:facet name="header">  
                 <h:outputText value="Alunos" /> 
            </f:facet>
            
            <p:column>
                <f:facet name="header">  
                    <h:outputText value="ID"/> 
                </f:facet>
                <h:form>
                    <p:commandLink ajax="false" value="#{aluno.id}"
                                   action="#{alunoMB.carregar(aluno)}"/>
                </h:form>
            </p:column>
            
            <p:column>
                <f:facet name="header">  
                    <h:outputText value="Aluno"/> 
                </f:facet>
                <h:form>
                    <p:commandLink ajax="false" value="#{aluno.nome}"
                                   action="#{alunoMB.carregar(aluno)}"/>
                </h:form>
            </p:column>
            
            <p:column>
                <f:facet name="header">  
                    <h:outputText value="E-mail"/> 
                </f:facet>
                <h:form>
                    <p:commandLink ajax="false" value="#{aluno.email}"
                                   action="#{alunoMB.carregar(aluno)}"/>
                </h:form>
            </p:column>
            
            <p:column>
                <f:facet name="header">  
                    <h:outputText value="Endereço"/> 
                </f:facet>
                <h:form>
                    <p:commandLink ajax="false" value="#{aluno.endereco}"
                                   action="#{alunoMB.carregar(aluno)}"/>
                </h:form>
            </p:column>
            
            <p:column>
                <f:facet name="header">  
                    <h:outputText value="Telefone"/> 
                </f:facet>
                <h:form>
                    <p:commandLink ajax="false" value="#{aluno.telefone}"
                                   action="#{alunoMB.carregar(aluno)}"/>
                </h:form>
            </p:column>
            
            <p:column>
                <f:facet name="header">  
                    <h:outputText value="Nascimento"/> 
                </f:facet>
                <h:form>
                    <p:commandLink ajax="false" value="#{aluno.dataNascimento}"
                                   action="#{alunoMB.carregar(aluno)}"/>
                </h:form>
            </p:column>
            
            <p:column>
                <f:facet name="header">  
                    <h:outputText value="Responsável"/> 
                </f:facet>
                <h:form>
                    <p:commandLink ajax="false" value="#{aluno.responsavel}"
                                   action="#{alunoMB.carregar(aluno)}"/>
                </h:form>
            </p:column>
            
            <p:column>
                <f:facet name="header">  
                    <h:outputText value="Parentesco"/> 
                </f:facet>
                <h:form>
                    <p:commandLink ajax="false" value="#{aluno.respParentesco}"
                                   action="#{alunoMB.carregar(aluno)}"/>
                </h:form>
            </p:column>
            
            <p:column>
                <f:facet name="header">  
                    <h:outputText value="Telefone (Resp)"/> 
                </f:facet>
                <h:form>
                    <p:commandLink ajax="false" value="#{aluno.respTelefone}"
                                   action="#{alunoMB.carregar(aluno)}"/>
                </h:form>
            </p:column>
          
            <p:column>
                <f:facet name="header">  
                    <h:outputText value="Excluir"/> 
                </f:facet>
                <h:form>
                    <p:commandButton ajax="false" value="X" 
                                     action="#{alunoMB.excluir(aluno.id)}"/>
                </h:form>
            </p:column>
        </p:dataTable>
        <hr></hr>
        
        <!--Formulario de crud-->
        
        <!--h:outputText value="[#{alunoMB.aluno.id}]"/-->
        <p:panel header="Manutenção de Alunos">
            <h:form>
                <h:inputHidden value="#{alunoMB.aluno.id}"/>
                <p:panelGrid columns="3">
                    <h:outputText value="Nome:"/>
                    <p:inputText value="#{alunoMB.aluno.nome}" required="true"
                                 requiredMessage="Campo obrigatório"/>
                    <p:message for="campoTelefone"/>

                    <h:outputText value="E-mail:"/>
                    <p:inputText value="#{alunoMB.aluno.email}" required="true"
                                 requiredMessage="Campo obrigatório"/>
                    <p:message for="campoTelefone"/>

                    <h:outputText value="Digite seu endereço:"/>
                    <p:inputText value="#{alunoMB.aluno.endereco}" required="true"
                                 requiredMessage="Campo obrigatório"/>
                    <p:message for="campoTelefone"/>

                    <h:outputText value="Telefone:"/>
                    <p:inputMask id="campoTelefone" mask="(99) 9999-9999"
                                 value="#{alunoMB.aluno.telefone}"
                                 required="true" requiredMessage="Campo obrigatório"
                                 validatorMessage="Digite um telefone no formato (XX) XXXX-XXXX"/>
                    <p:message for="campoTelefone"/>

                    <h:outputText value="Data de nascimento:"/>
                    <p:calendar value="#{alunoMB.aluno.dataNascimento}" required="true"
                                requiredMessage="Campo obrigatório"/>
                    <p:message for="campoTelefone"/>
                </p:panelGrid>

                <p:commandButton value="Cadastrar" action="#{alunoMB.cadastrar()}" ajax="false"/>
                <p:commandButton value="Alterar" action="#{alunoMB.alterar()}" ajax="false"/>
            </h:form>
            
            <h:form>
                <p:commandButton value="Limpar" action="#{alunoMB.limpar()}" ajax="false"/>
            </h:form>
        </p:panel>
        
    </body>
</html>
